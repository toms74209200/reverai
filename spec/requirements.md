# Technical Requirements and Architecture Specification

## アーキテクチャ概要

### バックエンド (Rust + Tauri)

- ゲームロジックの実装
  - `game.rs`: コアゲームロジック
  - `lib.rs`: Tauri バインディング用インターフェース
  - `main.rs`: アプリケーションのエントリーポイント

### フロントエンド (Next.js + TypeScript)

- コンポーネント構成
  - `GameBoard.tsx`: ゲームボードの表示と操作
  - `GameStatus.tsx`: 現在のターン、スコア表示
  - `NewGameButton.tsx`: ゲームリセット機能
- 状態管理
  - `GameState.ts`: ゲーム状態の型定義とインターフェース
  - `TauriInterface.ts`: Tauri との通信レイヤー

## 技術スタック

- **バックエンド**

  - Rust 1.7x
  - Tauri 2.x
  - serde (シリアライズ/デシリアライズ)

- **フロントエンド**
  - Next.js 14
  - TypeScript 5.x
  - TailwindCSS
  - CSS Modules

## テスト戦略

### バックエンドテスト

1. **ユニットテスト**
   - ゲームロジックのテスト（game.rs）
   - エッジケースの検証
   - 状態遷移のテスト

2. **統合テスト**
   - Tauri インターフェースのテスト
   - シリアライズ/デシリアライズのテスト

### テストアプローチ

- **振舞駆動開発（BDD）**
  - Gherkinフォーマットを使用したストーリー記述（features/ディレクトリ）
  - ドメインロジックをスモールテストレベルで記述
  - 「赤・緑・リファクタ」のテスト駆動開発サイクル

## 作業フロー

1. featuresディレクトリのGherkinシナリオを理解
2. テストの実装
3. テストが通るように機能実装
4. リファクタリング
5. gitmojiを使用したコミット
   - ✅ テスト追加時
   - ✨ 新機能追加時
   - 🐛 バグ修正時
   - ♻️ リファクタリング時
   - 📝 ドキュメント更新時

## パフォーマンス要件

- 初期表示時間: 1.5 秒以内
- ゲーム操作のレイテンシ: 100ms 以内
- メモリ使用量: 100MB 以下

## セキュリティ要件

- クロスプラットフォーム対応
- 適切なエラーハンドリング
- メモリ安全性（Rust の特性を活用）

## アクセシビリティ要件

- キーボード操作のサポート
- スクリーンリーダー対応
- WAI-ARIA 対応
- コントラスト比の確保

## 開発プロセス

1. コアロジックの実装（Rust）
2. フロントエンド UI の実装
3. Tauri 統合
4. テスト実装
5. パフォーマンス最適化
6. アクセシビリティ対応
